name: Main Branch Protection

on:
  pull_request:
    branches:
      - main

jobs:
  check-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Check branch
        run: |
          ALLOWED_BRANCH="stage"
         	if [[ $GIT_REFLOG_ACTION == *$ALLOWED_BRANCH* ]]; then
         		echo
         		echo \#
         		echo \# Merging from \"main\" to \"$ALLOWED_BRANCH\" is prohibited.
         		echo \#
        		echo \#
         		echo
         		exit 1
         	fi
